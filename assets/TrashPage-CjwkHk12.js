import{r,j as t,G as M,x as g,d as w,f as T,J as N,L as D,t as v}from"./index-BUlJw_Qc.js";import{u as B}from"./useSearch-BK8cORB_.js";import{u as C}from"./useTaskDetailHandler-BkDiA-iM.js";import{a as A,u as Q,M as S,Q as I,m as f}from"./index-DR0zWF9G.js";import{T as k}from"./index-DwIwvJAb.js";import{S as E,P as L}from"./index-BrW_zbsf.js";const V=({tasks:n,titles:o})=>{const[c,d]=r.useState(!0),[h,_]=r.useState(null),[i,l,x]=A({setItem:()=>{}}),u=B(),m=r.useMemo(()=>{d(!0);const j=n.filter(p=>p.isTrashed),$=u?j.filter(p=>{var y;return(y=p==null?void 0:p.title)==null?void 0:y.toLowerCase().includes(u.toLowerCase())}):j;return d(!1),$},[u,n]),b=C(),s=r.useMemo(()=>({titles:o,navigate:b,filteredTask:m}),[o,b,m]);return{filteredTask:m,isLoading:c,tableData:s,modalType:h,setModalType:_,isQuestionModalOpen:i,openQuestionModal:l,closeQuestionModal:x}},R="_table_2bl9o_1",P="_thead_2bl9o_7",W="_tbody_2bl9o_16",z="_tr_2bl9o_21",O="_th_2bl9o_7",q="_td_2bl9o_59",F="_capitalize_2bl9o_77",J="_title_2bl9o_98",Y="_avatar_2bl9o_103",G="_team_2bl9o_113",H="_info_2bl9o_119",U="_status_2bl9o_125",K="_actions_2bl9o_133",X="_editBtn_2bl9o_139",Z="_deleteBtn_2bl9o_150",tt="_titleWrapper_2bl9o_161",et="_actionIcon_2bl9o_172",st="_restore_2bl9o_177",e={table:R,thead:P,tbody:W,tr:z,th:O,td:q,capitalize:F,title:J,avatar:Y,team:G,info:H,status:U,actions:K,editBtn:X,deleteBtn:Z,titleWrapper:tt,actionIcon:et,restore:st,delete:"_delete_2bl9o_150"},at={restore:{text:"Are you sure you want to restore current task?",type:"restore",submitButtonText:"Restore"},delete:{text:"Are you sure you want to delete current task?",type:"delete",submitButtonText:"Delete"}},ot=({titles:n,filteredTask:o,navigate:c})=>{const d=r.useCallback(s=>c(s),[c]),{isDesktop:h}=Q(),[_,i]=r.useState(null),[l,x]=r.useState(null),[u,m,b]=A({setItem:x});return t.jsxs("table",{className:e.table,children:[t.jsx("thead",{className:e.thead,children:t.jsx("tr",{className:e.tr,children:h?n.map(s=>t.jsx("th",{className:`${e.th}`,children:s},s)):t.jsx("th",{className:e.th,children:n[0]})})}),t.jsx("tbody",{className:e.tbody,children:o.map(s=>t.jsxs("tr",{className:e.tr,children:[t.jsxs("td",{onClick:()=>d(s._id),className:`${e.td} ${e.titleWrapper}`,children:[t.jsx(E,{stage:s.stage}),t.jsx("h1",{className:e.title,children:s.title})]}),h?t.jsxs(t.Fragment,{children:[t.jsx("td",{className:e.td,children:t.jsx(L,{withAddition:!0,priority:s.priority})}),t.jsx("td",{className:e.td,children:t.jsx("p",{children:s.stage})}),t.jsx("td",{className:e.td,children:t.jsx("p",{children:new Date(s.updatedAt).toDateString()})}),t.jsxs("td",{className:`${e.actions} ${e.td} `,children:[t.jsx(M,{onClick:()=>{m(s),i("restore")},title:"Restore",className:`${e.restore} ${e.actionIcon}`}),t.jsx(g,{onClick:()=>{m(s),i("delete")},title:"Delete",className:`${e.delete} ${e.actionIcon}`})]})]}):t.jsx("td",{children:t.jsx(S,{})}),u&&(l==null?void 0:l._id)===s._id&&w.createPortal(t.jsx(I,{changedValue:u,onClose:b,task:l,...at[_]}),document.body)]},s._id))})]})},lt="_listView_2l9h4_1",nt="_notEmpty_2l9h4_6",it="_header_2l9h4_16",rt="_trashActions_2l9h4_25",ct="_trashAction_2l9h4_25",dt="_actionIcon_2l9h4_49",ht="_actionText_2l9h4_54",_t="_deleteIcon_2l9h4_64",a={listView:lt,notEmpty:nt,header:it,trashActions:rt,trashAction:ct,actionIcon:dt,actionText:ht,deleteIcon:_t},ut=["Full Name","Priority","Stage","Modified on"],mt={restoreAll:{text:"Are you sure you want to restore all the tasks?",type:"restore",submitButtonText:"Restore all"},deleteAll:{text:"Are you sure you want to delete all the tasks?",type:"delete",submitButtonText:"Delete all"}},xt=({tasks:n})=>{const{filteredTask:o,isLoading:c,tableData:d,modalType:h,setModalType:_,isQuestionModalOpen:i,openQuestionModal:l,closeQuestionModal:x}=V({tasks:n,titles:ut});return t.jsxs("section",{className:a.trash,children:[t.jsxs(f.header,{className:a.header,initial:"hidden",animate:"visible",variants:T,children:[t.jsx(k,{children:"Trash"}),t.jsxs("div",{className:a.trashActions,children:[t.jsxs("div",{onClick:()=>{o.length>0?(l(),_("restoreAll")):N.warning("You can't restore tasks because of trash is empty!")},className:a.trashAction,children:[t.jsx(M,{className:a.actionIcon}),t.jsx("p",{className:a.actionText,children:"Restore all"})]}),t.jsxs("div",{onClick:()=>{o.length>0?(l(),_("deleteAll")):N.warning("You can't delete tasks because of trash is empty!")},className:`${a.trashAction} ${a.deleteIcon}`,children:[t.jsx(g,{className:a.actionIcon}),t.jsx("p",{className:a.actionText,children:"Delete all"})]})]}),i&&t.jsx(I,{changedValue:i,onClose:x,...mt[h]})]}),t.jsx(f.section,{initial:"hidden",animate:"visible",variants:T,className:`${a.listView} ${o.length>0?a.notEmpty:""}`,children:c?t.jsx(D,{}):o.length>0?t.jsx(ot,{...d}):"Trash is empty"})]})},ft=()=>t.jsx("section",{className:"trash",children:t.jsx(xt,{tasks:v})});export{ft as default};
