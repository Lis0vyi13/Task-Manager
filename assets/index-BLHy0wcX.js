import{r as c,j as a,z as p,L as T,x as _,y as h,J as f,o as y,I as i,A as S}from"./index-BYnzJnnp.js";import{t as C}from"./transformToInputDateType-aVwzwLye.js";const q="_overlay_n6wqe_1",I="_modal_n6wqe_14",B="_image_n6wqe_21",u={overlay:q,modal:I,image:B},A=({src:t,alt:n,changedValue:e,onClose:r})=>{const[l,s]=c.useState(!0),o=()=>{s(!1)};return c.useEffect(()=>{s(!0)},[t]),a.jsx(p,{changedValue:e,onClose:r,children:a.jsxs("div",{className:u.modal,onClick:d=>d.stopPropagation(),children:[a.jsx("img",{className:u.image,src:t,alt:n,onLoad:o,style:{display:l?"none":"block"}}),l&&a.jsx(T,{})]})})},L="_modal_l6s7g_1",v="_dateTagBlock_l6s7g_5",x={modal:L,dateTagBlock:v},E=({changedValue:t,onClose:n,subtask:e})=>{const r={title:(e==null?void 0:e.title)||"",date:e!=null&&e.date?C(e.date):"",tag:(e==null?void 0:e.tag)||""},{handleSubmit:l,reset:s,control:o}=_({mode:"onChange",defaultValues:r}),{onSubmitHandler:d,onCloseHandler:m}=h({onClose:n,reset:s}),g=c.useCallback(j=>{d(j),f.success(e?"Changed successfull":"Added successfull")},[d,e]);return a.jsx(p,{changedValue:t,noCross:!0,onSubmit:l(g),onClose:m,children:a.jsx("section",{className:`modalWrapper ${x.modal}`,children:a.jsxs("form",{onSubmit:l(g),children:[a.jsx(y,{className:"modalTitle",children:e?"Edit subtask":"Add subtask"}),a.jsx(i,{name:"title",control:o,label:"Title",rules:{required:"Title is required"},placeholder:"Subtask title"}),a.jsxs("div",{className:x.dateTagBlock,children:[a.jsx(i,{name:"date",control:o,label:"Task date",type:"date",placeholder:"Date...",rules:{required:"Date is required"}}),a.jsx(i,{name:"tag",placeholder:"Tag",control:o,label:"Tag"})]}),a.jsx(S,{submitButtonText:e?"Submit":"Add Task",onClose:m})]})})})};export{A as I,E as S};
