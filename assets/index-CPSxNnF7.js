import{r as m,j as s,k as u,u as w,I,l as y,n as b,F as N,f as C,L as v}from"./index-CHvp5khB.js";import{u as k}from"./useTaskDetailHandler-CtPVOBJ8.js";import{T as f}from"./index-DtoNyqEg.js";import{P as T,S as g}from"./index-DL31JSmc.js";import{u as S}from"./useSearch-hDwAk_wX.js";import{m as L}from"./motion-TwR0FuKr.js";const M=({tasks:c,stage:n})=>{const[i,e]=m.useState(!0),l=S(),d=m.useMemo(()=>{e(!0);const r=n?c.filter(o=>o.stage===n):c,h=l?r.filter(o=>o.title.toLowerCase().includes(l.toLowerCase())):r;return e(!1),h},[l,n,c]);return{isLoading:i,filteredTasks:d}},B="_subtask_1owpa_1",E="_dateTagContainer_1owpa_8",D="_date_1owpa_8",V="_tag_1owpa_21",_={subtask:B,dateTagContainer:E,date:D,tag:V},W=({title:c,date:n,tag:i,index:e})=>s.jsxs("article",{className:_.subtask,children:[s.jsxs("p",{className:_.title,children:[e+1+") ",c]}),s.jsxs("div",{className:_.dateTagContainer,children:[s.jsx("span",{className:_.date,children:u(new Date(n))}),s.jsx("span",{className:_.tag,children:i})]})]}),F="_task_1lc0d_1",z="_content_1lc0d_7",P="_header_1lc0d_11",q="_main_1lc0d_18",U="_headerInfo_1lc0d_22",H="_headerMoreIcon_1lc0d_29",O="_taskTitle_1lc0d_46",R="_title_1lc0d_57",G="_headerTop_1lc0d_62",J="_date_1lc0d_69",K="_details_1lc0d_84",Q="_commentary_1lc0d_93",X="_assets_1lc0d_94",Y="_subtasks_1lc0d_95",Z="_team_1lc0d_124",ss="_userInfo_1lc0d_128",ts="_footer_1lc0d_141",es="_subtasksWrapper_1lc0d_154",as="_btnAddSubtask_1lc0d_163",cs="_disabled_1lc0d_177",a={task:F,content:z,header:P,main:q,headerInfo:U,headerMoreIcon:H,taskTitle:O,title:R,headerTop:G,date:J,details:K,commentary:Q,assets:X,subtasks:Y,team:Z,userInfo:ss,footer:ts,subtasksWrapper:es,btnAddSubtask:as,disabled:cs},Vs=({priority:c,stage:n,title:i,date:e,activities:l,assets:d,subTasks:r,team:h,_id:o})=>{const x=w(),$=k();return s.jsx("div",{className:a.task,children:s.jsxs("div",{className:a.content,children:[s.jsx("header",{className:a.header,children:s.jsxs("div",{className:a.headerInfo,children:[s.jsxs("div",{className:a.headerTop,children:[s.jsx(T,{withAddition:!0,priority:c}),s.jsx("div",{className:a.headerMoreIcon,children:s.jsx(I,{})})]}),s.jsxs("div",{onClick:()=>$(o),className:a.taskTitle,children:[s.jsx(g,{stage:n}),s.jsx("h1",{className:a.title,children:i})]}),s.jsx("div",{className:a.date,children:u(new Date(e))})]})}),s.jsxs("main",{className:a.main,children:[s.jsxs("section",{className:a.details,children:[s.jsxs("article",{title:"Commentary",className:a.commentary,children:[s.jsx(y,{}),s.jsx("span",{children:l.length})]}),s.jsxs("article",{title:"Assets",className:a.assets,children:[s.jsx(b,{}),s.jsx("span",{children:d.length})]}),s.jsxs("article",{title:"Subtasks",className:a.subtasks,children:[s.jsx(N,{}),s.jsxs("span",{children:["0/",r.length]})]})]}),s.jsx("section",{children:s.jsx(f,{infoClassName:a.userInfo,className:a.team,team:h})})]}),s.jsxs("footer",{className:a.footer,children:[s.jsx("section",{className:a.subtasksWrapper,children:r.map((p,A)=>m.createElement(W,{index:A,...p,key:p._id}))}),s.jsxs("button",{disabled:x.isAdmin,className:`${a.btnAddSubtask} ${x.isAdmin?"":a.disabled}`,children:[s.jsx("span",{children:"+"})," ",s.jsx("p",{children:"Add subtask"})]})]})]})})},ns="_table_iyjcu_1",is="_thead_iyjcu_7",ls="_tbody_iyjcu_18",ds="_tr_iyjcu_23",rs="_th_iyjcu_7",os="_td_iyjcu_50",_s="_capitalize_iyjcu_68",ms="_tableTitle_iyjcu_89",hs="_circle_iyjcu_100",js="_title_iyjcu_106",us="_priority_iyjcu_111",xs="_createdAt_iyjcu_123",ps="_daysAgo_iyjcu_128",ys="_details_iyjcu_132",bs="_commentary_iyjcu_141",Ns="_assets_iyjcu_142",ks="_subtasks_iyjcu_143",fs="_subtasksWrapper_iyjcu_160",Ts="_team_iyjcu_181",gs="_actions_iyjcu_185",$s="_editBtn_iyjcu_191",As="_deleteBtn_iyjcu_202",t={table:ns,thead:is,tbody:ls,tr:ds,th:rs,td:os,capitalize:_s,tableTitle:ms,circle:hs,title:js,priority:us,createdAt:xs,daysAgo:ps,details:ys,commentary:bs,assets:Ns,subtasks:ks,subtasksWrapper:fs,team:Ts,actions:gs,editBtn:$s,deleteBtn:As},ws=({filteredTasks:c,titles:n,navigateToTask:i})=>s.jsxs("table",{className:t.table,children:[s.jsx("thead",{className:t.thead,children:s.jsx("tr",{className:t.tr,children:n.map(e=>s.jsx("th",{className:`${t.th}`,children:e},e))})}),s.jsx("tbody",{className:t.tbody,children:c.map(e=>s.jsxs("tr",{className:t.tr,children:[s.jsxs("td",{onClick:()=>i(e._id),className:`${t.tableTitle} ${t.td}`,children:[s.jsx(g,{stage:e.stage}),s.jsx("h1",{className:t.title,children:e.title})]}),s.jsx("td",{className:`${t.priority} ${t.td}`,children:s.jsx(T,{withAddition:!0,priority:e.priority})}),s.jsx("td",{className:`${t.td} ${t.createdAt} ${t.capitalize}`,children:s.jsx("span",{className:t.daysAgo,children:u(new Date(e.date))})}),s.jsxs("td",{className:`${t.td} ${t.details}`,children:[s.jsxs("article",{title:"Commentary",className:t.commentary,children:[s.jsx(y,{}),s.jsx("span",{children:e.activities.length})]}),s.jsxs("article",{title:"Assets",className:t.assets,children:[s.jsx(b,{}),s.jsx("span",{children:e.assets.length})]}),s.jsxs("article",{title:"Subtasks",className:t.subtasks,children:[s.jsx(N,{}),s.jsxs("span",{children:["0/",e.subTasks.length]})]})]}),s.jsx("td",{className:`${t.td}`,children:s.jsx(f,{infoClassName:t.userInfo,side:"left",className:t.team,team:e.team})}),s.jsxs("td",{className:`${t.actions} ${t.td} `,children:[s.jsx("button",{className:t.editBtn,children:"Edit"}),s.jsx("button",{className:t.deleteBtn,children:"Delete"})]})]},e._id))})]}),Is="_listView_1gne3_1",Cs="_notEmpty_1gne3_8",j={listView:Is,notEmpty:Cs},vs=["Task title","Priority","Created At","Assets","Team"],Ws=({tasks:c,stage:n})=>{const{isLoading:i,filteredTasks:e}=M({tasks:c,stage:n}),l=k(),d=m.useMemo(()=>({filteredTasks:e,titles:vs,navigateToTask:l}),[e,l]);return s.jsx(L.section,{initial:"hidden",animate:"visible",variants:C,className:`${j.listView} ${e.length>0?j.notEmpty:""}`,children:i?s.jsx(v,{}):e.length>0?s.jsx(ws,{...d}):s.jsx("span",{className:j.notFound,children:"Tasks not found"})})};export{Ws as L,Vs as T,M as u};
