import{y as v,r as m,j as e,l as g,h as x,f as b,B}from"./index-BUlJw_Qc.js";import{u as D}from"./useSearch-BK8cORB_.js";import{M as C,T as _}from"./index-DwIwvJAb.js";import{u as w,I as u,t as F,S as T}from"./transformToInputDateType-DdZGQ-re.js";import{b as A,u as k,a as j,M as q,Q as U,m as f}from"./index-DR0zWF9G.js";import{T as z}from"./index-DDxf7fJK.js";const V=({changedValue:t,className:n,onClose:i})=>{const{handleSubmit:s,reset:r,control:d}=v({mode:"onChange"}),{onSubmitHandler:o,onCloseHandler:c}=w({onClose:i,reset:r}),h=m.useCallback(()=>{},[]);return e.jsx(C,{changedValue:t,className:n,noCross:!0,onSubmit:h,onClose:c,children:e.jsx("section",{className:"modalWrapper",children:e.jsxs("form",{onSubmit:s(o),children:[e.jsx(_,{className:"modalTitle",children:"Add new user"}),e.jsx(u,{name:"email",control:d,label:"Email",autoComplete:"email",rules:{required:"Email is required",pattern:{value:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,message:"Invalid email address"}},placeholder:"example@gmail.com",type:"email"}),e.jsx(A,{onSubmit:h,onClose:c})]})})})},$=({user:t,selectOptions:n})=>{const i=m.useMemo(()=>({name:(t==null?void 0:t.name)||"",role:(t==null?void 0:t.role)||"",email:(t==null?void 0:t.email)||"",status:(t==null?void 0:t.isActive)!==""?n==null?void 0:n.find(c=>c.value===t.isActive):"",createdAt:t!=null&&t.createdAt?F(t.createdAt):""}),[n,t.createdAt,t==null?void 0:t.email,t.isActive,t==null?void 0:t.name,t==null?void 0:t.role]),{handleSubmit:s,reset:r,control:d}=v({mode:"onChange",defaultValues:i}),o=m.useCallback(()=>{},[]);return{handleSubmit:s,reset:r,onSubmit:o,control:d}},N=[{value:!0,label:"Active"},{value:!1,label:"Disabled"}],I=({user:t,onClose:n,changedValue:i})=>{const{handleSubmit:s,reset:r,onSubmit:d,control:o}=$({user:t,selectStatusOptions:N}),{onSubmitHandler:c}=w({onClose:n,reset:r});return e.jsx(C,{onSubmit:d,onClose:n,changedValue:i,noCross:!0,children:e.jsxs("section",{className:"modalWrapper",children:[e.jsx(_,{className:"modalTitle",children:"Edit user"}),e.jsxs("form",{onSubmit:s(c),children:[e.jsx(u,{disabled:!0,name:"name",control:o,label:"Full name",rules:{required:"Full name is required!"},placeholder:"Your full name"}),e.jsx(u,{name:"role",control:o,label:"Role",rules:{required:"Role is required!"},placeholder:"User role"}),e.jsx(u,{name:"email",control:o,label:"Email",rules:{required:{value:!0,message:"Email is required"},pattern:{value:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,message:"Invalid email address"}},placeholder:"User role",type:"email",autoComplete:"email"}),e.jsx(T,{name:"status",control:o,label:"Status",rules:{required:"User status"},placeholder:"Status...",options:N}),e.jsx(u,{disabled:!0,name:"createdAt",control:o,label:"Created at",type:"date",rules:{required:"Date is required"}}),e.jsx(A,{onSubmit:d,onClose:n})]})]})})},H="_table_1plfw_1",Z="_thead_1plfw_7",Q="_tbody_1plfw_16",R="_tr_1plfw_21",L="_th_1plfw_7",W="_td_1plfw_60",P="_capitalize_1plfw_78",Y="_title_1plfw_98",G="_avatar_1plfw_103",J="_team_1plfw_113",K="_info_1plfw_119",O="_status_1plfw_125",X="_actions_1plfw_133",ee="_editBtn_1plfw_139",te="_deleteBtn_1plfw_150",a={table:H,thead:Z,tbody:Q,tr:R,th:L,td:W,capitalize:P,title:Y,avatar:G,team:J,info:K,status:O,actions:X,editBtn:ee,deleteBtn:te},ae=({users:t,titles:n})=>{const{isDesktop:i}=k(),[s,r]=m.useState(null),[d,o,c]=j({setItem:r}),[h,S,E]=j({setItem:r}),y=m.useCallback(()=>{},[]),M=m.useCallback(()=>{},[]);return e.jsxs("table",{className:a.table,children:[e.jsx("thead",{className:a.thead,children:e.jsx("tr",{className:a.tr,children:i?n.map(l=>e.jsx("th",{className:`${a.th}`,children:l},l)):e.jsx("th",{className:`${a.th}`,children:"Full name"})})}),e.jsx("tbody",{className:a.tbody,children:t.map(l=>e.jsxs("tr",{className:a.tr,children:[e.jsx("td",{className:a.td,children:e.jsxs("div",{className:a.team,children:[e.jsx(z,{...l,className:a.avatar,avatarClassName:a.avatar,infoClassName:a.info,side:"right",team:[l]}),e.jsx("p",{className:a.name,children:l.name})]})}),i?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:a.td,children:e.jsx("p",{children:l.role})}),e.jsx("td",{className:a.td,children:e.jsx("p",{children:l.email})}),e.jsx("td",{className:a.td,children:e.jsx("div",{style:{backgroundColor:l.isActive?"#BFDBFE":"#FEF3C7",color:l.isActive?"#1D4ED8":"#000"},className:a.status,children:e.jsx("p",{children:l!=null&&l.isActive?"Active":"Disabled"})})}),e.jsx("td",{className:a.td,children:e.jsx("p",{children:g(new Date(l.createdAt))})}),e.jsxs("td",{className:`${a.actions} ${a.td} `,children:[e.jsx("button",{onClick:()=>o(l),className:a.editBtn,children:"Edit"}),e.jsx("button",{onClick:()=>S(l),className:a.deleteBtn,children:"Delete"})]})]}):e.jsx("td",{children:e.jsx(q,{})}),d&&(s==null?void 0:s._id)===l._id&&e.jsx(I,{changedValue:d,onClose:c,onSubmit:y,user:s}),h&&(s==null?void 0:s._id)===l._id&&e.jsx(U,{changedValue:h,onClose:E,user:s,onSubmit:M,type:"delete",text:"Are you sure you want to delete current user?",submitButtonText:"Delete"})]},l._id))})]})},se="_listView_ofmc5_1",le="_notEmpty_ofmc5_12",ne="_header_ofmc5_17",oe="_button_ofmc5_26",p={listView:se,notEmpty:le,header:ne,button:oe},ie=["Full Name","Role","Email","Status","Created at"],de=()=>{const t=D(),[n,i]=m.useState(!1),s=m.useMemo(()=>t?x.users.filter(o=>{var c;return(c=o==null?void 0:o.name)==null?void 0:c.toLowerCase().includes(t==null?void 0:t.toLowerCase())}):x.users,[t]),r=m.useMemo(()=>({users:s,titles:ie}),[s]),d=m.useCallback(()=>{i(!0)},[]);return e.jsxs("section",{className:p.members,children:[e.jsxs(f.header,{className:p.header,initial:"hidden",animate:"visible",variants:b,children:[e.jsx(_,{children:"Team members"}),e.jsx(B,{onClick:d,className:p.button,children:"+ Add new user"}),n&&e.jsx(V,{changedValue:n,onClose:()=>i(!1)})]}),e.jsx(f.section,{initial:"hidden",animate:"visible",variants:b,className:`${p.listView} ${s.length>0?p.notEmpty:""}`,children:s.length>0?e.jsx(ae,{...r}):"No users found"})]})},_e=()=>e.jsx("section",{className:"team",children:e.jsx(de,{})});export{_e as default};
