import{r as u,u as B,j as s,l as S,P as L,n as $,o as z,F as O,f as P,L as Q}from"./index-BUlJw_Qc.js";import{u as V,P as F,T as H,a as W}from"./index-DVQa4QzV.js";import{T as v}from"./index-DDxf7fJK.js";import{P as w,S as E}from"./index-BrW_zbsf.js";import{M as I,u as R,a as C,Q as q,m as K}from"./index-DR0zWF9G.js";import{u as U}from"./useTaskDetailHandler-BkDiA-iM.js";import{u as G}from"./useSearch-BK8cORB_.js";const J=({tasks:t,stage:l})=>{const[c,i]=u.useState(!0),d=G(),r=u.useMemo(()=>{i(!0);const m=t.filter(o=>!o.isTrashed),_=l?m.filter(o=>o.stage===l):m,p=d?_.filter(o=>o.title.toLowerCase().includes(d.toLowerCase())):_;return i(!1),p},[d,l,t]);return{isLoading:c,filteredTasks:r}},X=({task:t})=>{const l=B(),c=u.useCallback(()=>{},[]),i=u.useCallback(()=>{},[]),{handleToggle:d,isOpened:r,isClosing:m,handleClose:_,TASK_MORE_OPTIONS:p,navigate:o,openAddSubtaskModal:j,isEditModalOpen:b,closeEditModal:k,isAddSubtaskModalOpen:N,closeAddSubtaskModal:a,isQuestionModalOpen:g,closeQuestionModal:y,isStageModalOpen:M,openStageModal:f,closeStageModal:h}=V({task:t});return{user:l,handleToggle:d,isOpened:r,isClosing:m,handleClose:_,TASK_MORE_OPTIONS:p,navigate:o,openAddSubtaskModal:j,isEditModalOpen:b,closeEditModal:k,isAddSubtaskModalOpen:N,closeAddSubtaskModal:a,isQuestionModalOpen:g,closeQuestionModal:y,isStageModalOpen:M,openStageModal:f,closeStageModal:h,onAddSubtaskHandler:c,onDeleteTaskHandler:i}},Y="_subtask_1owpa_1",Z="_dateTagContainer_1owpa_8",ss="_date_1owpa_8",es="_tag_1owpa_21",T={subtask:Y,dateTagContainer:Z,date:ss,tag:es},ts=({title:t,date:l,tag:c,index:i})=>s.jsxs("article",{className:T.subtask,children:[s.jsxs("p",{className:T.title,children:[i+1+") ",t]}),s.jsxs("div",{className:T.dateTagContainer,children:[s.jsx("span",{className:T.date,children:S(new Date(l))}),s.jsx("span",{className:T.tag,children:c})]})]}),as="_task_1m8dx_1",ns="_content_1m8dx_7",ds="_header_1m8dx_11",is="_main_1m8dx_18",ls="_headerInfo_1m8dx_22",os="_taskTitle_1m8dx_29",cs="_title_1m8dx_40",rs="_headerTop_1m8dx_45",_s="_date_1m8dx_53",ms="_details_1m8dx_68",us="_commentary_1m8dx_77",ps="_assets_1m8dx_78",hs="_subtasks_1m8dx_79",xs="_team_1m8dx_108",js="_userInfo_1m8dx_112",bs="_footer_1m8dx_125",ks="_subtasksWrapper_1m8dx_138",Ns="_btnAddSubtask_1m8dx_147",Ts="_disabled_1m8dx_161",gs="_popup_1m8dx_172",ys="_divider_1m8dx_176",n={task:as,content:ns,header:ds,main:is,headerInfo:ls,taskTitle:os,title:cs,headerTop:rs,date:_s,details:ms,commentary:us,assets:ps,subtasks:hs,team:xs,userInfo:js,footer:bs,subtasksWrapper:ks,btnAddSubtask:Ns,disabled:Ts,popup:gs,divider:ys},ae=({task:t})=>{const{handleToggle:l,isOpened:c,isClosing:i,handleClose:d,TASK_MORE_OPTIONS:r,navigate:m,user:_,openAddSubtaskModal:p,isEditModalOpen:o,closeEditModal:j,isAddSubtaskModalOpen:b,closeAddSubtaskModal:k,onAddSubtaskHandler:N,isQuestionModalOpen:a,closeQuestionModal:g,onDeleteTaskHandler:y,isStageModalOpen:M,closeStageModal:f}=X({task:t});return s.jsx("div",{className:n.task,children:s.jsxs("div",{className:n.content,children:[s.jsx("header",{className:n.header,children:s.jsxs("div",{className:n.headerInfo,children:[s.jsxs("div",{className:n.headerTop,children:[s.jsx(w,{withAddition:!0,priority:t.priority}),s.jsx(I,{onClick:l}),c&&s.jsx(L,{className:`${n.popup}`,isClosing:i,handleClose:d,children:r.map(h=>h.map((x,D)=>s.jsx(F,{disabled:x.permission,className:D+1===h.length?n.divider:"",icon:x.icon,title:x.title,handleClose:d,onClick:x.onClick},x.title)))}),s.jsx(H,{task:t,isEditModalOpen:o,closeEditModal:j,isAddSubtaskModalOpen:b,closeAddSubtaskModal:k,onAddSubtaskHandler:N,isQuestionModalOpen:a,closeQuestionModal:g,onDeleteTaskHandler:y,isStageModalOpen:M,closeStageModal:f})]}),s.jsxs("div",{onClick:()=>m(t._id),className:n.taskTitle,children:[s.jsx(E,{stage:t.stage}),s.jsx("h1",{className:n.title,children:t.title})]}),s.jsx("div",{className:n.date,children:S(new Date(t.date))})]})}),s.jsxs("main",{className:n.main,children:[s.jsxs("section",{className:n.details,children:[s.jsxs("article",{title:"Commentary",className:n.commentary,children:[s.jsx($,{}),s.jsx("span",{children:t.activities.length})]}),s.jsxs("article",{title:"Assets",className:n.assets,children:[s.jsx(z,{}),s.jsx("span",{children:t.assets.length})]}),s.jsxs("article",{title:"Subtasks",className:n.subtasks,children:[s.jsx(O,{}),s.jsxs("span",{children:["0/",t.subTasks.length]})]})]}),s.jsx("section",{children:s.jsx(v,{infoClassName:n.userInfo,className:n.team,team:t.team})})]}),s.jsxs("footer",{className:n.footer,children:[s.jsx("section",{className:n.subtasksWrapper,children:t.subTasks.map((h,x)=>u.createElement(ts,{index:x,...h,key:h._id}))}),s.jsxs("button",{disabled:_.isAdmin,onClick:_.isAdmin&&p,className:`${n.btnAddSubtask} ${_.isAdmin?"":n.disabled}`,children:[s.jsx("span",{children:"+"})," ",s.jsx("p",{children:"Add subtask"})]})]})]})})},Ms="_table_d6za4_1",fs="_thead_d6za4_7",As="_tbody_d6za4_16",Ss="_tr_d6za4_21",Cs="_th_d6za4_7",$s="_td_d6za4_59",zs="_capitalize_d6za4_77",Os="_tableTitle_d6za4_98",vs="_circle_d6za4_109",ws="_title_d6za4_115",Es="_priority_d6za4_120",Is="_createdAt_d6za4_132",Ds="_daysAgo_d6za4_137",Bs="_details_d6za4_141",Ls="_commentary_d6za4_150",Ps="_assets_d6za4_151",Qs="_subtasks_d6za4_152",Vs="_subtasksWrapper_d6za4_169",Fs="_team_d6za4_190",Hs="_actions_d6za4_194",Ws="_editBtn_d6za4_200",Rs="_deleteBtn_d6za4_211",e={table:Ms,thead:fs,tbody:As,tr:Ss,th:Cs,td:$s,capitalize:zs,tableTitle:Os,circle:vs,title:ws,priority:Es,createdAt:Is,daysAgo:Ds,details:Bs,commentary:Ls,assets:Ps,subtasks:Qs,subtasksWrapper:Vs,team:Fs,actions:Hs,editBtn:Ws,deleteBtn:Rs},qs=({filteredTasks:t,titles:l,navigateToTask:c})=>{const{isDesktop:i}=R(),[d,r]=u.useState(null),[m,_,p]=C({setItem:r}),[o,j,b]=C({setItem:r}),k=u.useCallback(()=>{},[]),N=u.useCallback(()=>{},[]);return s.jsxs("table",{className:e.table,children:[s.jsx("thead",{className:e.thead,children:s.jsx("tr",{className:e.tr,children:i?l.map(a=>s.jsx("th",{className:`${e.th}`,children:a},a)):s.jsx("th",{className:e.th,children:l[0]})})}),s.jsx("tbody",{className:e.tbody,children:t.map(a=>s.jsxs("tr",{className:e.tr,children:[s.jsxs("td",{onClick:()=>c(a._id),className:`${e.tableTitle} ${e.td}`,children:[s.jsx(E,{stage:a.stage}),s.jsx("h1",{className:e.title,children:a.title})]}),i?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:`${e.priority} ${e.td}`,children:s.jsx(w,{withAddition:!0,priority:a.priority})}),s.jsx("td",{className:`${e.td} ${e.createdAt} ${e.capitalize}`,children:s.jsx("span",{className:e.daysAgo,children:S(new Date(a.date))})}),s.jsxs("td",{className:`${e.td} ${e.details}`,children:[s.jsxs("article",{title:"Commentary",className:e.commentary,children:[s.jsx($,{}),s.jsx("span",{children:a.activities.length})]}),s.jsxs("article",{title:"Assets",className:e.assets,children:[s.jsx(z,{}),s.jsx("span",{children:a.assets.length})]}),s.jsxs("article",{title:"Subtasks",className:e.subtasks,children:[s.jsx(O,{}),s.jsxs("span",{children:["0/",a.subTasks.length]})]})]}),s.jsx("td",{className:`${e.td}`,children:s.jsx(v,{infoClassName:e.userInfo,side:"left",className:e.team,team:a.team})}),s.jsxs("td",{className:`${e.actions} ${e.td} `,children:[s.jsx("button",{onClick:()=>_(a),className:e.editBtn,children:"Edit"}),s.jsx("button",{onClick:()=>j(a),className:e.deleteBtn,children:"Delete"})]})]}):s.jsx("td",{children:s.jsx(I,{})}),m&&(d==null?void 0:d._id)===a._id&&s.jsx(W,{changedValue:m,onClose:p,onSubmit:k,task:d}),o&&(d==null?void 0:d._id)===a._id&&s.jsx(q,{changedValue:o,onClose:b,task:d,onSubmit:N,type:"delete",text:"Are you sure you want to delete the selected task?",submitButtonText:"Delete"})]},a._id))})]})},Ks="_listView_1xft2_1",Us="_notEmpty_1xft2_12",A={listView:Ks,notEmpty:Us},Gs=["Task title","Priority","Created At","Assets","Team"],ne=({tasks:t,stage:l})=>{const{isLoading:c,filteredTasks:i}=J({tasks:t,stage:l}),d=U(),r=u.useMemo(()=>({filteredTasks:i,titles:Gs,navigateToTask:d}),[i,d]);return s.jsx(K.section,{initial:"hidden",animate:"visible",variants:P,className:`${A.listView} ${i.length>0?A.notEmpty:""}`,children:c?s.jsx(Q,{}):i.length>0?s.jsx(qs,{...r}):s.jsx("span",{className:A.notFound,children:"Tasks not found"})})};export{ne as L,ae as T,J as u};
