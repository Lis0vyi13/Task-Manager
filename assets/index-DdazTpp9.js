import{r as c,j as a,C as p,L as T,z as _,A as h,J as f,q as S,I as i,D as y}from"./index-d2EGw5oL.js";import{t as C}from"./transformToInputDateType-DWvk148s.js";const q="_overlay_n6wqe_1",I="_modal_n6wqe_14",B="_image_n6wqe_21",u={overlay:q,modal:I,image:B},A=({src:t,alt:n,changedValue:e,onClose:r})=>{const[o,s]=c.useState(!0),l=()=>{s(!1)};return c.useEffect(()=>{s(!0)},[t]),a.jsx(p,{changedValue:e,onClose:r,children:a.jsxs("div",{className:u.modal,onClick:d=>d.stopPropagation(),children:[a.jsx("img",{className:u.image,src:t,alt:n,onLoad:l,style:{display:o?"none":"block"}}),o&&a.jsx(T,{})]})})},L="_modal_l6s7g_1",v="_dateTagBlock_l6s7g_5",x={modal:L,dateTagBlock:v},D=({changedValue:t,onClose:n,subtask:e})=>{const r={title:(e==null?void 0:e.title)||"",date:e!=null&&e.date?C(e.date):"",tag:(e==null?void 0:e.tag)||""},{handleSubmit:o,reset:s,control:l}=_({mode:"onChange",defaultValues:r}),{onSubmitHandler:d,onCloseHandler:m}=h({onClose:n,reset:s}),g=c.useCallback(j=>{d(j),f.success(e?"Changed successful":"Added successful")},[d,e]);return a.jsx(p,{changedValue:t,noCross:!0,onSubmit:o(g),onClose:m,children:a.jsx("section",{className:`modalWrapper ${x.modal}`,children:a.jsxs("form",{onSubmit:o(g),children:[a.jsx(S,{className:"modalTitle",children:e?"Edit subtask":"Add subtask"}),a.jsx(i,{name:"title",control:l,label:"Title",rules:{required:"Title is required"},placeholder:"Subtask title"}),a.jsxs("div",{className:x.dateTagBlock,children:[a.jsx(i,{name:"date",control:l,label:"Task date",type:"date",placeholder:"Date...",rules:{required:"Date is required"}}),a.jsx(i,{name:"tag",placeholder:"Tag",control:l,label:"Tag"})]}),a.jsx(y,{submitButtonText:e?"Submit":"Add Task",onClose:m})]})})})};export{A as I,D as S};
