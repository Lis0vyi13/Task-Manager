import{j as s,w as $,x as I,y as A,z as M,A as P,C as D,r as o,e as L,L as v,m as z,D as E,E as F,B as w,S as q,G as W,H as R,q as T,J as K,t as O,K as U}from"./index-CHvp5khB.js";import{T as g}from"./index-DquKI1xP.js";import{T as G}from"./index-BoRXCNhs.js";import{P as H,S as Y}from"./index-DL31JSmc.js";import{T as J}from"./index-DtoNyqEg.js";const V="_icon_zorh8_1",Q="_iconStarted_zorh8_13",X="_iconCompleted_zorh8_17",Z="_iconInProgress_zorh8_21",ss="_iconBug_zorh8_25",es="_iconCommented_zorh8_30",d={icon:V,iconStarted:Q,iconCompleted:X,iconInProgress:Z,iconBug:ss,iconCommented:es},ts={commented:s.jsx("div",{className:`${d.icon} ${d.iconCommented}`,children:s.jsx($,{})}),started:s.jsx("div",{className:`${d.icon} ${d.iconStarted}`,children:s.jsx(I,{})}),assigned:s.jsx("div",{className:`${d.icon} ${d.iconAssigned}`,children:s.jsx(A,{})}),bug:s.jsx("div",{className:`${d.icon} ${d.iconBug}`,children:s.jsx(M,{size:24})}),completed:s.jsx("div",{className:`${d.icon} ${d.iconCompleted}`,children:s.jsx(P,{size:24})}),"in progress":s.jsx("div",{className:`${d.icon} ${d.iconInProgress}`,children:s.jsx(D,{size:16})})},as="_activity_9dkdd_1",cs="_iconBlock_9dkdd_6",os="_icon_9dkdd_6",ns="_lineBlock_9dkdd_19",ls="_line_9dkdd_19",is="_info_9dkdd_29",rs="_username_9dkdd_33",ds="_typeDateBlock_9dkdd_39",ms="_type_9dkdd_39",_s="_date_9dkdd_51",us="_activityText_9dkdd_57",m={activity:as,iconBlock:cs,icon:os,lineBlock:ns,line:ls,info:is,username:rs,typeDateBlock:ds,type:ms,date:_s,activityText:us},hs=o.memo(({activity:e})=>{const t=o.useMemo(()=>{var a;return(a=L.users.find(c=>c._id===e.by))==null?void 0:a.name},[e.by]);return s.jsxs("div",{className:m.activity,children:[s.jsxs("div",{className:m.iconBlock,children:[s.jsx("div",{className:m.icon,children:ts[e.type]}),s.jsx("div",{className:m.lineBlock,children:s.jsx("div",{className:m.line})})]}),s.jsxs("div",{className:m.info,children:[s.jsx("h3",{className:m.username,children:t||s.jsx(v,{})}),s.jsxs("div",{className:m.typeDateBlock,children:[s.jsx("span",{className:m.type,children:e.type}),s.jsx("span",{className:m.date,children:z(e.date).fromNow()})]}),s.jsx("h1",{className:m.activityText,children:e.activity})]})]})}),xs="_addActivityForm_5m6dm_1",ks="_label_5m6dm_5",js="_selectBlock_5m6dm_10",gs="_select_5m6dm_10",ps="_textareaBlock_5m6dm_39",bs="_textarea_5m6dm_39",Ns="_submitButton_5m6dm_91",vs="_errorText_5m6dm_98",u={addActivityForm:xs,label:ks,selectBlock:js,select:gs,textareaBlock:ps,textarea:bs,submitButton:Ns,errorText:vs},ys=()=>{const{register:e,handleSubmit:t,reset:a,formState:{errors:c}}=E(),n=l=>{console.log(l),a()};return s.jsxs("form",{onSubmit:t(n),className:u.addActivityForm,children:[s.jsxs("div",{className:u.selectBlock,children:[s.jsx("p",{className:u.label,children:"Type:"}),s.jsx("select",{id:"type",...e("type",{required:!0}),className:u.select,children:F.map(l=>s.jsx("option",{value:l,children:l},l))}),c.type&&s.jsx("p",{className:u.errorText,children:"Please select a type."})]}),(c==null?void 0:c.type)&&s.jsx("p",{className:u.errorText,children:"Please select a type."}),s.jsxs("div",{className:u.textareaBlock,children:[s.jsx("textarea",{placeholder:"Type...",className:u.textarea,...e("activity",{required:!0}),name:"activity"}),c.activity&&s.jsx("p",{className:u.errorText,children:"Please enter an activity."})]}),s.jsx(w,{className:u.submitButton,type:"submit",children:"Submit"})]})},Bs="_activitiesWrapper_9deir_1",Ts="_title_9deir_14",fs="_activities_9deir_1",Ss="_left_9deir_25",Cs="_right_9deir_29",p={activitiesWrapper:Bs,title:Ts,activities:fs,left:Ss,right:Cs},$s=({task:e})=>{var t;return s.jsxs("section",{className:p.activitiesWrapper,children:[s.jsxs("article",{className:p.left,children:[s.jsx(g,{className:p.title,children:"Activities"}),s.jsx("div",{className:p.activities,children:((t=e==null?void 0:e.activities)==null?void 0:t.length)>0?e.activities.map(a=>s.jsx(hs,{activity:a},a._id)):"No activities added"})]}),s.jsxs("article",{className:p.right,children:[s.jsx(g,{className:p.title,children:"Add activity"}),s.jsx(ys,{})]})]})};function Is(e){let t,a,c=0;return e<50?(t=255,a=Math.round(255*(e/50))):(t=Math.round(255*(1-(e-50)/50)),a=255),{background:`rgb(${t}, ${a}, ${c})`,isLight:(t+a+c)/3>128}}const As=({task:e})=>{const{subTasks:t}=o.useMemo(()=>e,[e]),a=o.useMemo(()=>t.filter(l=>l.done).length,[t]),c=o.useMemo(()=>a>0?Math.round(a/t.length*100):0,[a,t.length]);return{progressColor:o.useMemo(()=>Is(c),[c]),subtasksProgress:c,subTasks:t}},Ms="_status_kt5py_1",Ps="_uppercase_kt5py_7",Ds={status:Ms,uppercase:Ps},Ls=({priority:e})=>{const t=o.useMemo(()=>q[e],[e]),a=o.useMemo(()=>e==="normal"?"1px solid #000":"unset",[e]);return s.jsx("div",{style:{backgroundColor:t,border:a},className:Ds.status,children:s.jsx(H,{style:{textTransform:"uppercase",fontWeight:"bold"},priority:e,withAddition:!0})})},zs="_avatar_mgm8r_1",Es="_info_mgm8r_12",Fs="_userInfo_mgm8r_18",ws="_name_mgm8r_25",qs="_role_mgm8r_29",Ws="_member_mgm8r_33",k={avatar:zs,info:Es,userInfo:Fs,name:ws,role:qs,member:Ws},Rs=({user:e})=>s.jsxs("div",{className:k.member,children:[s.jsx(J,{...e,className:k.avatar,avatarClassName:k.avatar,infoClassName:k.info,team:[e]}),s.jsxs("div",{className:k.userInfo,children:[s.jsx("p",{className:k.name,children:e.name}),s.jsx("span",{className:k.role,children:e.role})]})]}),Ks="_subtask_n9ij7_1",Os="_subtaskIcon_n9ij7_6",Us="_header_n9ij7_21",Gs="_date_n9ij7_28",Hs="_tag_n9ij7_34",Ys="_doneTag_n9ij7_43",Js="_subtaskTitle_n9ij7_48",Vs="_done_n9ij7_43",Qs="_undone_n9ij7_56",Xs="_button_n9ij7_60",r={subtask:Ks,subtaskIcon:Os,header:Us,date:Gs,tag:Hs,doneTag:Ys,subtaskTitle:Js,done:Vs,undone:Qs,button:Xs},Zs=({title:e,date:t,tag:a,done:c})=>{const n=o.useCallback(()=>{},[]);return s.jsxs("div",{className:r.subtask,children:[s.jsx("div",{className:r.subtaskIcon,children:s.jsx(W,{style:{color:"rgb(124,58,237)"},size:26})}),s.jsxs("div",{className:r.subtaskInfo,children:[s.jsxs("header",{className:r.header,children:[s.jsx("span",{className:r.date,children:new Date(t).toDateString()}),s.jsx("span",{className:r.tag,children:a}),c&&s.jsx("span",{className:`${r.doneTag} ${r.tag}`,children:"Done"})]}),s.jsx("main",{className:r.main,children:s.jsx("p",{className:r.subtaskTitle,children:e})}),s.jsx("footer",{className:r.footer,children:s.jsx("button",{onClick:n,className:`${c?r.undone:r.done} ${r.button}`,children:c?"Mark as Undone":"Mark as Done"})})]})]})},se="_taskInfo_11634_1",ee="_priorityStageBlock_11634_6",te="_stageBlock_11634_12",ae="_stage_11634_12",ce="_createdAtBlock_11634_23",oe="_createdAt_11634_23",ne="_assetsSubTasksBlock_11634_33",le="_teamBlock_11634_45",ie="_subtasksBlock_11634_46",re="_titleSecondary_11634_50",de="_memberBlock_11634_56",me="_substasksTitle_11634_61",_e="_subtasksProgress_11634_67",ue="_subtasks_11634_46",i={taskInfo:se,priorityStageBlock:ee,stageBlock:te,stage:ae,createdAtBlock:ce,createdAt:oe,assetsSubTasksBlock:ne,teamBlock:le,subtasksBlock:ie,titleSecondary:re,memberBlock:de,substasksTitle:me,subtasksProgress:_e,subtasks:ue},he=o.memo(({task:e})=>{const{progressColor:t,subtasksProgress:a,subTasks:c}=As({task:e});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:i.taskInfo,children:[s.jsxs("div",{className:i.priorityStageBlock,children:[s.jsx(Ls,{priority:e.priority}),s.jsxs("div",{className:i.stageBlock,children:[s.jsx(Y,{stage:e.stage}),s.jsx("span",{className:i.stage,children:e.stage})]})]}),s.jsx("div",{className:i.createdAtBlock,children:s.jsxs("span",{className:i.createdAt,children:["Created at: ",new Date(e.createdAt).toDateString()]})})]}),s.jsxs("div",{className:i.assetsSubTasksBlock,children:[s.jsxs("span",{children:["Assets: ",e.assets.length]}),s.jsx("span",{children:"|"}),s.jsxs("span",{children:["Sub-Tasks: ",e.subTasks.length]})]}),s.jsxs("div",{className:i.teamBlock,children:[s.jsx(g,{className:i.titleSecondary,children:"TASK TEAM"}),s.jsx("div",{className:i.team,children:e.team.map(n=>s.jsx("div",{className:i.memberBlock,children:s.jsx(Rs,{user:n})},n._id))})]}),s.jsxs("div",{className:i.subtasksBlock,children:[s.jsxs("div",{className:i.substasksTitle,children:[s.jsx(g,{className:i.titleSecondary,children:"Sub-tasks"}),s.jsx("div",{style:{background:t.background},className:i.subtasksProgress,children:s.jsxs("span",{style:{color:t.isLight?"#000":"#fff"},className:i.subtasksProgressValue,children:[a.toFixed(2),"%"]})})]}),s.jsx("div",{className:i.subtasks,children:c.map(n=>s.jsx(Zs,{...n},n._id))})]})]})}),xe="_overlay_dl1wd_1",ke="_closeButton_dl1wd_14",f={overlay:xe,closeButton:ke},je=({onClose:e,children:t})=>s.jsxs("div",{className:f.overlay,onClick:e,children:[s.jsx("div",{onClick:a=>a.stopPropagation(),children:t}),s.jsx("button",{className:f.closeButton,onClick:e,children:"Ã—"})]}),ge="_overlay_1c19u_1",pe="_modal_1c19u_14",be="_image_1c19u_18",S={overlay:ge,modal:pe,image:be},Ne=({src:e,alt:t,onClose:a})=>{const[c,n]=o.useState(!0),l=()=>{n(!1)};return o.useEffect(()=>{n(!0)},[e]),s.jsx(je,{onClose:a,children:s.jsxs("div",{className:S.modal,onClick:_=>_.stopPropagation(),children:[s.jsx("img",{className:S.image,src:e,alt:t,onLoad:l,style:{display:c?"none":"block"}}),c&&s.jsx(v,{})]})})},ve=({task:e})=>{const[t,a]=o.useState(null),[c,n]=o.useState(!0);o.useEffect(()=>{if(e.assets&&e.assets.length>0){const h=e.assets.map(y=>new Promise(N=>{const x=new Image;x.src=y,x.onload=N,x.onerror=N}));Promise.all(h).then(()=>{n(!1)})}else n(!1)},[e.assets]);const l=o.useCallback(h=>{a(h)},[]),_=o.useCallback(()=>{a(null)},[]);return{selectedImage:t,loading:c,handleImageClick:l,handleCloseModal:_}},ye="_title_f2p82_1",Be="_assetsBlock_f2p82_6",Te="_assets_f2p82_6",fe="_asset_f2p82_6",Se="_supportLinksBlock_f2p82_34",Ce="_loader_f2p82_38",j={title:ye,assetsBlock:Be,assets:Te,asset:fe,supportLinksBlock:Se,loader:Ce},$e=({task:e})=>{var l;const{selectedImage:t,loading:a,handleImageClick:c,handleCloseModal:n}=ve({task:e});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:j.description,children:[s.jsx(g,{className:j.title,children:"TASK DESCRIPTION"}),s.jsx("p",{children:e.description||"No description added"})]}),s.jsxs("div",{className:j.assetsBlock,children:[s.jsx(g,{className:j.title,children:"Assets"}),s.jsx("div",{className:j.assets,children:a?s.jsx("div",{className:j.loader,children:s.jsx(v,{})}):((l=e==null?void 0:e.assets)==null?void 0:l.length)>0?e.assets.map((_,h)=>s.jsx("img",{onClick:()=>c(_),className:j.asset,src:_,alt:`asset ${h}`},`asset-${h}`)):s.jsx("p",{children:"No assets available"})})]}),t&&s.jsx(Ne,{src:t,alt:"Selected asset",onClose:n})]})},Ie="_taskDetail_1i6o4_1",Ae="_block_1i6o4_13",B={taskDetail:Ie,block:Ae},Me=({task:e})=>s.jsxs("section",{className:B.taskDetail,children:[s.jsx("article",{className:B.block,children:s.jsx(he,{task:e})}),s.jsx("article",{className:B.block,children:s.jsx($e,{task:e})})]});function Pe(e){return R({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13 5h8"},child:[]},{tag:"path",attr:{d:"M13 9h5"},child:[]},{tag:"path",attr:{d:"M13 15h8"},child:[]},{tag:"path",attr:{d:"M13 19h5"},child:[]},{tag:"path",attr:{d:"M3 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M3 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]}]})(e)}const De="_titleBlock_1sayq_1",Le="_title_1sayq_1",ze="_backIcon_1sayq_12",Ee="_tabs_1sayq_28",Fe="_content_1sayq_32",b={titleBlock:De,title:Le,backIcon:ze,tabs:Ee,content:Fe},Oe=()=>{const{id:e}=T.useParams(),[t,a]=o.useState(1),c=o.useMemo(()=>[{id:1,title:"Task details",icon:s.jsx(Pe,{}),Component:Me},{id:2,title:"Activities/Timeline",icon:s.jsx(K,{}),Component:$s}],[]),n={data:c,activeTab:t,setActiveTab:a},l=o.useMemo(()=>O.find(x=>x._id===e),[e]),_=o.useMemo(()=>{var x;return(x=c.find(C=>C.id===t))==null?void 0:x.Component},[t,c]),h=T.useNavigate(),[y,N]=o.useState(!0);return o.useEffect(()=>{_&&setTimeout(()=>N(!1),500)},[_]),s.jsxs("section",{className:b.taskDetail,children:[s.jsxs("div",{onClick:()=>h(-1),className:b.titleBlock,children:[s.jsx(U,{className:b.backIcon}),s.jsx(g,{className:b.title,children:l==null?void 0:l.title})]}),s.jsx("div",{className:b.tabs,children:s.jsx(G,{...n})}),s.jsx("div",{className:b.content,children:y?s.jsx(v,{}):s.jsx(_,{task:l})})]})};export{Oe as default};
