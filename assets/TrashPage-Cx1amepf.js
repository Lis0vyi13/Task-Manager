import{r,E as I,j as t,S as g,k as y,d as D,f as b,o as w,U as $,L as C,t as S}from"./index-C4BvmKIC.js";import{u as v}from"./useSearch-CGeVfClh.js";import{a as B,u as Q,Q as A,m as f}from"./index-BM1N_-Y_.js";import{S as k,P as E}from"./index-C0IukqqV.js";const L=({tasks:c,titles:o})=>{const[d,h]=r.useState(!0),[_,u]=r.useState(null),[n,l,x]=I({setItem:()=>{}}),m=v(),i=r.useMemo(()=>{h(!0);const N=c.filter(p=>p.isTrashed),M=m?N.filter(p=>{var T;return(T=p==null?void 0:p.title)==null?void 0:T.toLowerCase().includes(m.toLowerCase())}):N;return h(!1),M},[m,c]),j=B(),s=r.useMemo(()=>({titles:o,navigate:j,filteredTask:i}),[o,j,i]);return{filteredTask:i,isLoading:d,tableData:s,modalType:_,setModalType:u,isQuestionModalOpen:n,openQuestionModal:l,closeQuestionModal:x}},R="_table_otgs6_1",V="_thead_otgs6_7",P="_tbody_otgs6_16",W="_tr_otgs6_21",z="_th_otgs6_7",O="_td_otgs6_60",q="_capitalize_otgs6_79",F="_title_otgs6_102",U="_avatar_otgs6_107",Y="_team_otgs6_117",H="_info_otgs6_123",J="_status_otgs6_129",G="_actions_otgs6_137",K="_editBtn_otgs6_143",X="_deleteBtn_otgs6_154",Z="_titleWrapper_otgs6_165",tt="_actionIcon_otgs6_176",et="_restore_otgs6_181",e={table:R,thead:V,tbody:P,tr:W,th:z,td:O,capitalize:q,title:F,avatar:U,team:Y,info:H,status:J,actions:G,editBtn:K,deleteBtn:X,titleWrapper:Z,actionIcon:tt,restore:et,delete:"_delete_otgs6_154"},st={restore:{text:"Are you sure you want to restore current task?",type:"restore",submitButtonText:"Restore"},delete:{text:"Are you sure you want to delete current task?",type:"delete",submitButtonText:"Delete"}},at=({titles:c,filteredTask:o,navigate:d})=>{const h=r.useCallback(s=>d(s),[d]),{isDesktop:_}=Q(),[u,n]=r.useState(null),[l,x]=r.useState(null),[m,i,j]=I({setItem:x});return t.jsxs("table",{className:e.table,children:[t.jsx("thead",{className:e.thead,children:t.jsx("tr",{className:e.tr,children:_?c.map(s=>t.jsx("th",{className:`${e.th}`,children:s},s)):t.jsx("th",{className:e.th,children:c[0]})})}),t.jsx("tbody",{className:e.tbody,children:o.map(s=>t.jsxs("tr",{className:e.tr,children:[t.jsxs("td",{onClick:()=>h(s._id),className:`${e.td} ${e.titleWrapper}`,children:[t.jsx(k,{stage:s.stage}),t.jsx("h1",{className:e.title,children:s.title})]}),_?t.jsxs(t.Fragment,{children:[t.jsx("td",{className:e.td,children:t.jsx(E,{withAddition:!0,priority:s.priority})}),t.jsx("td",{className:e.td,children:t.jsx("p",{children:s.stage})}),t.jsx("td",{className:e.td,children:t.jsx("p",{children:new Date(s.updatedAt).toDateString()})}),t.jsxs("td",{className:`${e.actions} ${e.td} `,children:[t.jsx(g,{onClick:()=>{i(s),n("restore")},title:"Restore",className:`${e.restore} ${e.actionIcon}`}),t.jsx(y,{onClick:()=>{i(s),n("delete")},title:"Delete",className:`${e.delete} ${e.actionIcon}`})]})]}):t.jsxs("td",{className:`${e.actions} ${e.td} `,children:[t.jsx(g,{onClick:()=>{i(s),n("restore")},title:"Restore",className:`${e.restore} ${e.actionIcon}`}),t.jsx(y,{onClick:()=>{i(s),n("delete")},title:"Delete",className:`${e.delete} ${e.actionIcon}`})]}),m&&(l==null?void 0:l._id)===s._id&&D.createPortal(t.jsx(A,{changedValue:m,onClose:j,task:l,...st[u]}),document.body)]},s._id))})]})},ot="_listView_2l9h4_1",nt="_notEmpty_2l9h4_6",lt="_header_2l9h4_16",it="_trashActions_2l9h4_25",ct="_trashAction_2l9h4_25",rt="_actionIcon_2l9h4_49",dt="_actionText_2l9h4_54",ht="_deleteIcon_2l9h4_64",a={listView:ot,notEmpty:nt,header:lt,trashActions:it,trashAction:ct,actionIcon:rt,actionText:dt,deleteIcon:ht},_t=["Full Name","Priority","Stage","Modified on"],ut={restoreAll:{text:"Are you sure you want to restore all the tasks?",type:"restore",submitButtonText:"Restore all"},deleteAll:{text:"Are you sure you want to delete all the tasks?",type:"delete",submitButtonText:"Delete all"}},mt=({tasks:c})=>{const{filteredTask:o,isLoading:d,tableData:h,modalType:_,setModalType:u,isQuestionModalOpen:n,openQuestionModal:l,closeQuestionModal:x}=L({tasks:c,titles:_t});return t.jsxs("section",{className:a.trash,children:[t.jsxs(f.header,{className:a.header,initial:"hidden",animate:"visible",variants:b,children:[t.jsx(w,{children:"Trash"}),t.jsxs("div",{className:a.trashActions,children:[t.jsxs("div",{onClick:()=>{o.length>0?(l(),u("restoreAll")):$.warning("You can't restore tasks because of trash is empty!")},className:a.trashAction,children:[t.jsx(g,{className:a.actionIcon}),t.jsx("p",{className:a.actionText,children:"Restore all"})]}),t.jsxs("div",{onClick:()=>{o.length>0?(l(),u("deleteAll")):$.warning("You can't delete tasks because of trash is empty!")},className:`${a.trashAction} ${a.deleteIcon}`,children:[t.jsx(y,{className:a.actionIcon}),t.jsx("p",{className:a.actionText,children:"Delete all"})]})]}),n&&t.jsx(A,{changedValue:n,onClose:x,...ut[_]})]}),t.jsx(f.section,{initial:"hidden",animate:"visible",variants:b,className:`${a.listView} ${o.length>0?a.notEmpty:""}`,children:d?t.jsx(C,{}):o.length>0?t.jsx(at,{...h}):"Trash is empty"})]})},yt=()=>t.jsx("section",{className:"trash",children:t.jsx(mt,{tasks:S})});export{yt as default};
