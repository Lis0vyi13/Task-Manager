import{r,C as g,j as e,U as y,k as N,d as M,f as b,o as D,J as $,L as w,t as C}from"./index-BYnzJnnp.js";import{u as Q}from"./useSearch-DcyhTdjs.js";import{a as S,u as k,m as f}from"./useTaskDetailHandler-XAoCGMY1.js";import{Q as I}from"./index-D2KHYmH9.js";import{S as B,P as E}from"./index-B6HM4YWT.js";const L=({tasks:i,titles:o})=>{const[d,m]=r.useState(!0),[_,h]=r.useState(null),[n,l,x]=g({setItem:()=>{}}),u=Q(),c=r.useMemo(()=>{m(!0);const T=i.filter(p=>p.isTrashed),A=u?T.filter(p=>{var v;return(v=p==null?void 0:p.title)==null?void 0:v.toLowerCase().includes(u.toLowerCase())}):T;return m(!1),A},[u,i]),j=S(),s=r.useMemo(()=>({titles:o,navigate:j,filteredTask:c}),[o,j,c]);return{filteredTask:c,isLoading:d,tableData:s,modalType:_,setModalType:h,isQuestionModalOpen:n,openQuestionModal:l,closeQuestionModal:x}},R="_table_v8mde_1",V="_thead_v8mde_7",P="_tbody_v8mde_16",W="_tr_v8mde_21",z="_th_v8mde_7",O="_td_v8mde_60",q="_capitalize_v8mde_79",F="_title_v8mde_102",J="_titleWrapper_v8mde_107",U="_avatar_v8mde_118",Y="_team_v8mde_128",H="_info_v8mde_134",G="_status_v8mde_140",K="_actions_v8mde_148",X="_deleteBtn_v8mde_154",Z="_actionIcon_v8mde_165",ee="_restore_v8mde_170",t={table:R,thead:V,tbody:P,tr:W,th:z,td:O,capitalize:q,title:F,titleWrapper:J,avatar:U,team:Y,info:H,status:G,actions:K,deleteBtn:X,actionIcon:Z,restore:ee,delete:"_delete_v8mde_154"},te={restore:{text:"Are you sure you want to restore current task?",type:"restore",submitButtonText:"Restore"},delete:{text:"Are you sure you want to delete current task?",type:"delete",submitButtonText:"Delete"}},se=({titles:i,filteredTask:o,navigate:d})=>{const m=r.useCallback(s=>d(s),[d]),{isDesktop:_}=k(),[h,n]=r.useState(null),[l,x]=r.useState(null),[u,c,j]=g({setItem:x});return e.jsxs("table",{className:t.table,children:[e.jsx("thead",{className:t.thead,children:e.jsx("tr",{className:t.tr,children:_?i.map(s=>e.jsx("th",{className:`${t.th}`,children:s},s)):e.jsx("th",{className:t.th,children:i[0]})})}),e.jsx("tbody",{className:t.tbody,children:o.map(s=>e.jsxs("tr",{className:t.tr,children:[e.jsxs("td",{onClick:()=>m(s._id),className:`${t.td} ${t.titleWrapper}`,children:[e.jsx(B,{stage:s.stage}),e.jsx("h1",{className:t.title,children:s.title})]}),_?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:t.td,children:e.jsx(E,{withAddition:!0,priority:s.priority})}),e.jsx("td",{className:t.td,children:e.jsx("p",{children:s.stage})}),e.jsx("td",{className:t.td,children:e.jsx("p",{children:new Date(s.updatedAt).toDateString()})}),e.jsxs("td",{className:`${t.actions} ${t.td} `,children:[e.jsx(y,{onClick:()=>{c(s),n("restore")},title:"Restore",className:`${t.restore} ${t.actionIcon}`}),e.jsx(N,{onClick:()=>{c(s),n("delete")},title:"Delete",className:`${t.delete} ${t.actionIcon}`})]})]}):e.jsxs("td",{className:`${t.actions} ${t.td} `,children:[e.jsx(y,{onClick:()=>{c(s),n("restore")},title:"Restore",className:`${t.restore} ${t.actionIcon}`}),e.jsx(N,{onClick:()=>{c(s),n("delete")},title:"Delete",className:`${t.delete} ${t.actionIcon}`})]}),u&&(l==null?void 0:l._id)===s._id&&M.createPortal(e.jsx(I,{changedValue:u,onClose:j,task:l,...te[h]}),document.body)]},s._id))})]})},ae="_listView_cnit7_1",oe="_notEmpty_cnit7_6",ne="_header_cnit7_16",le="_trashActions_cnit7_25",ce="_trashAction_cnit7_25",ie="_actionIcon_cnit7_49",re="_actionText_cnit7_54",de="_deleteIcon_cnit7_64",a={listView:ae,notEmpty:oe,header:ne,trashActions:le,trashAction:ce,actionIcon:ie,actionText:re,deleteIcon:de},me=["Full Name","Priority","Stage","Modified on"],_e={restoreAll:{text:"Are you sure you want to restore all the tasks?",type:"restore",submitButtonText:"Restore all"},deleteAll:{text:"Are you sure you want to delete all the tasks?",type:"delete",submitButtonText:"Delete all"}},he=({tasks:i})=>{const{filteredTask:o,isLoading:d,tableData:m,modalType:_,setModalType:h,isQuestionModalOpen:n,openQuestionModal:l,closeQuestionModal:x}=L({tasks:i,titles:me});return e.jsxs("section",{className:a.trash,children:[e.jsxs(f.header,{className:a.header,initial:"hidden",animate:"visible",variants:b,children:[e.jsx(D,{children:"Trash"}),e.jsxs("div",{className:a.trashActions,children:[e.jsxs("div",{onClick:()=>{o.length>0?(l(),h("restoreAll")):$.warning("You can't restore tasks because of trash is empty!")},className:a.trashAction,children:[e.jsx(y,{className:a.actionIcon}),e.jsx("p",{className:a.actionText,children:"Restore all"})]}),e.jsxs("div",{onClick:()=>{o.length>0?(l(),h("deleteAll")):$.warning("You can't delete tasks because of trash is empty!")},className:`${a.trashAction} ${a.deleteIcon}`,children:[e.jsx(N,{className:a.actionIcon}),e.jsx("p",{className:a.actionText,children:"Delete all"})]})]}),n&&e.jsx(I,{changedValue:n,onClose:x,..._e[_]})]}),e.jsx(f.section,{initial:"hidden",animate:"visible",variants:b,className:`${a.listView} ${o.length>0?a.notEmpty:""}`,children:d?e.jsx(w,{}):o.length>0?e.jsx(se,{...m}):"Trash is empty"})]})},Ne=()=>e.jsx("section",{className:"trash",children:e.jsx(he,{tasks:C})});export{Ne as default};
