import{j as s,q as f,v as S,w as $,x as A,y as C,z as I,d as M,m as P,A as D,C as z,B as L,S as F,D as E,r as u,L as B,G as q,p as y,E as w,t as W,H as R}from"./index-DgRPRj9N.js";import{T as x}from"./index-otyCc5Id.js";import{P as O,S as U}from"./index-jtv03v_a.js";import{T as G}from"./index-2KoQvGtW.js";import{T as H}from"./index-B4w7YtJs.js";const K="_icon_zorh8_1",Y="_iconStarted_zorh8_13",V="_iconCompleted_zorh8_17",J="_iconInProgress_zorh8_21",Q="_iconBug_zorh8_25",X="_iconCommented_zorh8_30",r={icon:K,iconStarted:Y,iconCompleted:V,iconInProgress:J,iconBug:Q,iconCommented:X},Z={commented:s.jsx("div",{className:`${r.icon} ${r.iconCommented}`,children:s.jsx(f,{})}),started:s.jsx("div",{className:`${r.icon} ${r.iconStarted}`,children:s.jsx(S,{})}),assigned:s.jsx("div",{className:`${r.icon} ${r.iconAssigned}`,children:s.jsx($,{})}),bug:s.jsx("div",{className:`${r.icon} ${r.iconBug}`,children:s.jsx(A,{size:24})}),completed:s.jsx("div",{className:`${r.icon} ${r.iconCompleted}`,children:s.jsx(C,{size:24})}),"in progress":s.jsx("div",{className:`${r.icon} ${r.iconInProgress}`,children:s.jsx(I,{size:16})})},ss="_activity_9dkdd_1",es="_iconBlock_9dkdd_6",ts="_icon_9dkdd_6",as="_lineBlock_9dkdd_19",cs="_line_9dkdd_19",ns="_info_9dkdd_29",os="_username_9dkdd_33",is="_typeDateBlock_9dkdd_39",ls="_type_9dkdd_39",rs="_date_9dkdd_51",ds="_activityText_9dkdd_57",_={activity:ss,iconBlock:es,icon:ts,lineBlock:as,line:cs,info:ns,username:os,typeDateBlock:is,type:ls,date:rs,activityText:ds},_s=({activity:e})=>s.jsxs("div",{className:_.activity,children:[s.jsxs("div",{className:_.iconBlock,children:[s.jsx("div",{className:_.icon,children:Z[e.type]}),s.jsx("div",{className:_.lineBlock,children:s.jsx("div",{className:_.line})})]}),s.jsxs("div",{className:_.info,children:[s.jsx("h3",{className:_.username,children:M.users.find(t=>t._id===e.by).name}),s.jsxs("div",{className:_.typeDateBlock,children:[s.jsx("span",{className:_.type,children:e.type}),s.jsx("span",{className:_.date,children:P(e.date).fromNow()})]}),s.jsx("h1",{className:_.activityText,children:e.activity})]})]}),ms="_label_1bs0a_1",hs="_addActivityForm_1bs0a_6",us="_selectBlock_1bs0a_10",xs="_select_1bs0a_10",ks="_textareaBlock_1bs0a_39",js="_textarea_1bs0a_39",bs="_submitButton_1bs0a_91",gs="_errorText_1bs0a_98",m={label:ms,addActivityForm:hs,selectBlock:us,select:xs,textareaBlock:ks,textarea:js,submitButton:bs,errorText:gs},ps=()=>{const{register:e,handleSubmit:t,reset:a,formState:{errors:c}}=D(),d=o=>{console.log(o),a()};return s.jsxs("form",{onSubmit:t(d),className:m.addActivityForm,children:[s.jsxs("div",{className:m.selectBlock,children:[s.jsx("p",{className:m.label,children:"Type:"}),s.jsx("select",{id:"type",...e("type",{required:!0}),className:m.select,children:z.map(o=>s.jsx("option",{value:o,children:o},o))}),c.type&&s.jsx("p",{className:m.errorText,children:"Please select a type."})]}),(c==null?void 0:c.type)&&s.jsx("p",{className:m.errorText,children:"Please select a type."}),s.jsxs("div",{className:m.textareaBlock,children:[s.jsx("textarea",{placeholder:"Type...",className:m.textarea,...e("activity",{required:!0}),name:"activity"}),c.activity&&s.jsx("p",{className:m.errorText,children:"Please enter an activity."})]}),s.jsx(L,{className:m.submitButton,type:"submit",children:"Submit"})]})},Ns="_activitiesWrapper_ut0y6_1",vs="_title_ut0y6_13",ys="_activities_ut0y6_1",Bs="_left_ut0y6_24",Ts="_right_ut0y6_28",k={activitiesWrapper:Ns,title:vs,activities:ys,left:Bs,right:Ts},fs=({task:e})=>{var t;return s.jsxs("section",{className:k.activitiesWrapper,children:[s.jsxs("article",{className:k.left,children:[s.jsx(x,{className:k.title,children:"Activities"}),s.jsx("div",{className:k.activities,children:((t=e==null?void 0:e.activities)==null?void 0:t.length)>0?e.activities.map(a=>s.jsx(_s,{activity:a},a._id)):"No activities added"})]}),s.jsxs("article",{className:k.right,children:[s.jsx(x,{className:k.title,children:"Add activity"}),s.jsx(ps,{})]})]})};function Ss(e){let t,a,c=0;return e<50?(t=255,a=Math.round(255*(e/50))):(t=Math.round(255*(1-(e-50)/50)),a=255),{background:`rgb(${t}, ${a}, ${c})`,isLight:(t+a+c)/3>128}}const $s="_status_kt5py_1",As="_uppercase_kt5py_7",Cs={status:$s,uppercase:As},Is=({priority:e})=>{const t=F[e];return s.jsx("div",{style:{backgroundColor:t,border:e==="normal"?"1px solid #000":"unset"},className:Cs.status,children:s.jsx(O,{style:{textTransform:"uppercase",fontWeight:"bold"},priority:e,withAddition:!0})})},Ms="_avatar_mgm8r_1",Ps="_info_mgm8r_12",Ds="_userInfo_mgm8r_18",zs="_name_mgm8r_25",Ls="_role_mgm8r_29",Fs="_member_mgm8r_33",h={avatar:Ms,info:Ps,userInfo:Ds,name:zs,role:Ls,member:Fs},Es=({user:e})=>s.jsxs("div",{className:h.member,children:[s.jsx(G,{...e,className:h.avatar,avatarClassName:h.avatar,infoClassName:h.info,team:[e]}),s.jsxs("div",{className:h.userInfo,children:[s.jsx("p",{className:h.name,children:e.name}),s.jsx("span",{className:h.role,children:e.role})]})]}),qs="_subtask_n9ij7_1",ws="_subtaskIcon_n9ij7_6",Ws="_header_n9ij7_21",Rs="_date_n9ij7_28",Os="_tag_n9ij7_34",Us="_doneTag_n9ij7_43",Gs="_subtaskTitle_n9ij7_48",Hs="_done_n9ij7_43",Ks="_undone_n9ij7_56",Ys="_button_n9ij7_60",l={subtask:qs,subtaskIcon:ws,header:Ws,date:Rs,tag:Os,doneTag:Us,subtaskTitle:Gs,done:Hs,undone:Ks,button:Ys},Vs=({title:e,date:t,tag:a,done:c})=>{const d=()=>{};return s.jsxs("div",{className:l.subtask,children:[s.jsx("div",{className:l.subtaskIcon,children:s.jsx(E,{style:{color:"rgb(124,58,237)"},size:26})}),s.jsxs("div",{className:l.subtaskInfo,children:[s.jsxs("header",{className:l.header,children:[s.jsx("span",{className:l.date,children:new Date(t).toDateString()}),s.jsx("span",{className:l.tag,children:a}),c&&s.jsx("span",{className:`${l.doneTag} ${l.tag}`,children:"Done"})]}),s.jsx("main",{className:l.main,children:s.jsx("p",{className:l.subtaskTitle,children:e})}),s.jsx("footer",{className:l.footer,children:s.jsx("button",{onClick:d,className:`${c?l.undone:l.done} ${l.button}`,children:c?"Mark as Undone":"Mark as Done"})})]})]})},Js="_taskInfo_11634_1",Qs="_priorityStageBlock_11634_6",Xs="_stageBlock_11634_12",Zs="_stage_11634_12",se="_createdAtBlock_11634_23",ee="_createdAt_11634_23",te="_assetsSubTasksBlock_11634_33",ae="_teamBlock_11634_45",ce="_subtasksBlock_11634_46",ne="_titleSecondary_11634_50",oe="_memberBlock_11634_56",ie="_substasksTitle_11634_61",le="_subtasksProgress_11634_67",re="_subtasks_11634_46",n={taskInfo:Js,priorityStageBlock:Qs,stageBlock:Xs,stage:Zs,createdAtBlock:se,createdAt:ee,assetsSubTasksBlock:te,teamBlock:ae,subtasksBlock:ce,titleSecondary:ne,memberBlock:oe,substasksTitle:ie,subtasksProgress:le,subtasks:re},de=({task:e})=>{const{subTasks:t}=e,a=u.useMemo(()=>t.filter(i=>i.done).length,[t]),c=t.length,d=a>0?Math.round(a/c*100):0,o=u.useMemo(()=>Ss(d),[d]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:n.taskInfo,children:[s.jsxs("div",{className:n.priorityStageBlock,children:[s.jsx(Is,{priority:e.priority}),s.jsxs("div",{className:n.stageBlock,children:[s.jsx(U,{stage:e.stage}),s.jsx("span",{className:n.stage,children:e.stage})]})]}),s.jsx("div",{className:n.createdAtBlock,children:s.jsxs("span",{className:n.createdAt,children:["Created at: ",new Date(e.createdAt).toDateString()]})})]}),s.jsxs("div",{className:n.assetsSubTasksBlock,children:[s.jsxs("span",{children:["Assets: ",e.assets.length]}),s.jsx("span",{children:"|"}),s.jsxs("span",{children:["Sub-Tasks: ",e.subTasks.length]})]}),s.jsxs("div",{className:n.teamBlock,children:[s.jsx(x,{className:n.titleSecondary,children:"TASK TEAM"}),s.jsx("div",{className:n.team,children:e.team.map(i=>s.jsx("div",{className:n.memberBlock,children:s.jsx(Es,{user:i})},i._id))})]}),s.jsxs("div",{className:n.subtasksBlock,children:[s.jsxs("div",{className:n.substasksTitle,children:[s.jsx(x,{className:n.titleSecondary,children:"Sub-tasks"}),s.jsx("div",{style:{background:o.background},className:n.subtasksProgress,children:s.jsxs("span",{style:{color:o.isLight?"#000":"#fff"},className:n.subtasksProgressValue,children:[d.toFixed(2),"%"]})})]}),s.jsx("div",{className:n.subtasks,children:t.map(i=>s.jsx(Vs,{...i},i._id))})]})]})},_e="_title_1gh70_1",me="_assetsBlock_1gh70_6",he="_assets_1gh70_6",ue="_asset_1gh70_6",xe="_supportLinksBlock_1gh70_34",j={title:_e,assetsBlock:me,assets:he,asset:ue,supportLinksBlock:xe},ke="_overlay_159hz_1",je="_modal_159hz_14",be="_image_159hz_18",ge="_closeButton_159hz_25",N={overlay:ke,modal:je,image:be,closeButton:ge},pe=({src:e,alt:t,onClose:a})=>s.jsx("div",{className:N.overlay,onClick:a,children:e?s.jsxs("div",{className:N.modal,onClick:c=>c.stopPropagation(),children:[s.jsx("button",{className:N.closeButton,onClick:a,children:"Ã—"}),s.jsx("img",{className:N.image,src:e,alt:t})]}):s.jsx(B,{})}),Ne=({task:e})=>{var o;const[t,a]=u.useState(null),c=i=>{a(i)},d=()=>{a(null)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:j.description,children:[s.jsx(x,{className:j.title,children:"TASK DESCRIPTION"}),s.jsx("p",{children:e.description||"No description added"})]}),s.jsxs("div",{className:j.assetsBlock,children:[s.jsx(x,{className:j.title,children:"Assets"}),s.jsx("div",{className:j.assets,children:((o=e==null?void 0:e.assets)==null?void 0:o.length)>0?e.assets.map((i,g)=>s.jsx("img",{onClick:()=>c(i),className:j.asset,src:i,alt:`asset ${g}`},`asset-${g}`)):s.jsx("p",{children:"No assets available"})})]}),t&&s.jsx(pe,{src:t,alt:"Selected asset",onClose:d})]})},ve="_taskDetail_1i6o4_1",ye="_block_1i6o4_13",v={taskDetail:ve,block:ye},Be=({task:e})=>s.jsxs("section",{className:v.taskDetail,children:[s.jsx("article",{className:v.block,children:s.jsx(de,{task:e})}),s.jsx("article",{className:v.block,children:s.jsx(Ne,{task:e})})]});function Te(e){return q({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13 5h8"},child:[]},{tag:"path",attr:{d:"M13 9h5"},child:[]},{tag:"path",attr:{d:"M13 15h8"},child:[]},{tag:"path",attr:{d:"M13 19h5"},child:[]},{tag:"path",attr:{d:"M3 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M3 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]}]})(e)}const fe="_titleBlock_1sayq_1",Se="_title_1sayq_1",$e="_backIcon_1sayq_12",Ae="_tabs_1sayq_28",Ce="_content_1sayq_32",b={titleBlock:fe,title:Se,backIcon:$e,tabs:Ae,content:Ce},Le=()=>{const{id:e}=y.useParams(),[t,a]=u.useState(1),c=u.useMemo(()=>[{id:1,title:"Task details",icon:s.jsx(Te,{}),Component:Be},{id:2,title:"Activities/Timeline",icon:s.jsx(w,{}),Component:fs}],[]),d={data:c,activeTab:t,setActiveTab:a},o=u.useMemo(()=>W.find(p=>p._id===e),[e]),i=u.useMemo(()=>{var p;return(p=c.find(T=>T.id===t))==null?void 0:p.Component},[t,c]),g=y.useNavigate();return s.jsxs("section",{className:b.taskDetail,children:[s.jsxs("div",{onClick:()=>g(-1),className:b.titleBlock,children:[s.jsx(R,{className:b.backIcon}),s.jsx(x,{className:b.title,children:o==null?void 0:o.title})]}),s.jsx("div",{className:b.tabs,children:s.jsx(H,{...d})}),s.jsx("div",{className:b.content,children:i?s.jsx(i,{task:o}):s.jsx(B,{})})]})};export{Le as default};
