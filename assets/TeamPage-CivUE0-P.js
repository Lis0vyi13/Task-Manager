import{z as M,A as E,r,J as $,j as e,C as B,q as C,I as A,D,e as g,M as w,l as z,w as T,P as S,i as b,f as N,B as F}from"./index-d2EGw5oL.js";import{u as I}from"./useSearch-BJP6Z1JU.js";import{u as V}from"./index-sjEg0t_o.js";import{T as O,M as P,P as U}from"./transformToInputDateType-DWvk148s.js";import{Q}from"./index-B37HlN2s.js";import{E as H}from"./index-CI5uEbmM.js";import{m as v}from"./useTaskDetailHandler-BR0vCfsk.js";const Z="_modal_1fz7w_1",q={modal:Z},J=({changedValue:s,className:n,onClose:o})=>{const{handleSubmit:a,reset:m,control:i}=M({mode:"onChange"}),{onSubmitHandler:l,onCloseHandler:c}=E({onClose:o,reset:m}),u=r.useCallback(p=>{l(p),$.success("Added successful")},[l]);return e.jsx(B,{changedValue:s,className:n,noCross:!0,onSubmit:a(u),onClose:c,children:e.jsx("section",{className:`modalWrapper ${q.modal}`,children:e.jsxs("form",{onSubmit:a(u),children:[e.jsx(C,{className:"modalTitle",children:"Add new user"}),e.jsx(A,{name:"email",control:i,label:"Email",autoComplete:"email",rules:{required:"Email is required",pattern:{value:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,message:"Invalid email address"}},placeholder:"example@gmail.com",type:"email"}),e.jsx(D,{onClose:c})]})})})},L="_table_ul75y_1",R="_thead_ul75y_6",W="_tbody_ul75y_14",G="_tr_ul75y_19",K="_th_ul75y_6",X="_td_ul75y_34",Y="_capitalize_ul75y_52",d={table:L,thead:R,tbody:W,tr:G,th:K,td:X,capitalize:Y},ee="_table_vjckg_1",se="_tr_vjckg_7",te="_td_vjckg_31",ae="_capitalize_vjckg_40",le="_title_vjckg_60",ne="_avatar_vjckg_65",oe="_team_vjckg_75",ie="_info_vjckg_81",ce="_status_vjckg_87",de="_actions_vjckg_95",re="_editBtn_vjckg_101",me="_deleteBtn_vjckg_112",t={table:ee,tr:se,td:te,capitalize:ae,title:le,avatar:ne,team:oe,info:ie,status:ce,actions:de,editBtn:re,deleteBtn:me},_e=({user:s})=>{const{isEditModalOpen:n,closeEditModal:o,isQuestionModalOpen:a,closeQuestionModal:m,openQuestionModal:i,openEditModal:l,handleToggle:c,isOpened:u,isClosing:p,handleClose:j}=V({task:s}),{isDesktop:k}=g(),f=r.useMemo(()=>[[{icon:{Icon:w,color:"#000"},title:"Edit",permission:!1,onClick:l}],[{icon:{Icon:z,color:"red"},title:"Delete",permission:!1,onClick:i}]],[l,i]);return e.jsxs("tr",{className:t.tr,children:[e.jsx("td",{className:t.td,children:e.jsxs("div",{className:t.team,children:[e.jsx(O,{...s,className:t.avatar,avatarClassName:t.avatar,infoClassName:t.info,side:"right",team:[s]}),e.jsx("p",{className:t.name,children:s.name})]})}),k?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:t.td,children:e.jsx("p",{children:s.role})}),e.jsx("td",{className:t.td,children:e.jsx("p",{children:s.email})}),e.jsx("td",{className:t.td,children:e.jsx("div",{style:{backgroundColor:s.isActive?"#BFDBFE":"#FEF3C7",color:s.isActive?"#1D4ED8":"#000"},className:t.status,children:e.jsx("p",{children:s!=null&&s.isActive?"Active":"Disabled"})})}),e.jsx("td",{className:t.td,children:e.jsx("p",{children:T(new Date(s.createdAt))})}),e.jsxs("td",{className:`${t.actions} ${t.td} `,children:[e.jsx("button",{onClick:()=>l(s),className:t.editBtn,children:"Edit"}),e.jsx("button",{onClick:()=>i(s),className:t.deleteBtn,children:"Delete"})]})]}):e.jsxs("td",{children:[e.jsx(P,{onClick:c}),u&&e.jsx(S,{className:`${t.popup}`,isClosing:p,handleClose:j,children:f.map(x=>x.map((_,y)=>e.jsx(U,{disabled:_.permission,className:y+1===x.length?"divider":"",icon:_.icon,title:_.title,handleClose:j,onClick:_.onClick},_.title)))})]}),n&&e.jsx(H,{changedValue:n,onClose:o,user:s}),a&&e.jsx(Q,{changedValue:a,onClose:m,user:s,type:"delete",text:"Are you sure you want to delete current user?",submitButtonText:"Delete"})]},s._id)},he=({users:s,titles:n})=>{const{isDesktop:o}=g();return e.jsxs("table",{className:d.table,children:[e.jsx("thead",{className:d.thead,children:e.jsx("tr",{className:d.tr,children:o?n.map(a=>e.jsx("th",{className:`${d.th}`,children:a},a)):e.jsx("th",{className:`${d.th}`,children:"Full name"})})}),e.jsx("tbody",{className:d.tbody,children:s.map(a=>e.jsx(_e,{user:a},a._id))})]})},ue="_listView_1xia6_1",pe="_notEmpty_1xia6_11",je="_header_1xia6_16",xe="_button_1xia6_25",h={listView:ue,notEmpty:pe,header:je,button:xe},be=["Full Name","Role","Email","Status","Created at"],Ne=()=>{const s=I(),[n,o]=r.useState(!1),a=r.useMemo(()=>s?b.users.filter(l=>{var c;return(c=l==null?void 0:l.name)==null?void 0:c.toLowerCase().includes(s==null?void 0:s.toLowerCase())}):b.users,[s]),m=r.useMemo(()=>({users:a,titles:be}),[a]),i=r.useCallback(()=>{o(!0)},[]);return e.jsxs("section",{className:h.members,children:[e.jsxs(v.header,{className:h.header,initial:"hidden",animate:"visible",variants:N,children:[e.jsx(C,{children:"Team members"}),e.jsx(F,{onClick:i,className:h.button,children:"+ Add new user"}),n&&e.jsx(J,{changedValue:n,onClose:()=>o(!1)})]}),e.jsx(v.section,{initial:"hidden",animate:"visible",variants:N,className:`${h.listView} ${a.length>0?h.notEmpty:""}`,children:a.length>0?e.jsx(he,{...m}):"No users found"})]})},Ee=()=>e.jsx("section",{className:"team",children:e.jsx(Ne,{})});export{Ee as default};
